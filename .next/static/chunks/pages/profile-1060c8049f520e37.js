(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{1969:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return s(7218)}])},8519:function(t,e,s){"use strict";s.r(e);var o=s(5893),l=s(7294);let n=t=>class extends l.Component{componentDidMount(){let t=localStorage.getItem("token");fetch("".concat("http://localhost:3000/api/","auth"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})}).then(t=>t.json()).then(t=>{let{logged:e,login:s,token:o,img:l}=t;this.setState({logged:e,login:s,token:o,img:l})})}render(){let{logged:e,login:s,token:l,img:n}=this.state,i=()=>this.setState({logged:!1,login:"",token:"",img:""}),r=t=>this.setState(t);return(0,o.jsx)(t,{profile:{login:s,token:l,img:n,resetLoggedState:i},changeAuthState:r,logged:e,...this.props})}constructor(...t){super(...t),this.state={logged:!1}}};e.default=n},9406:function(t,e,s){"use strict";s.r(e);var o=s(5893),l=s(7294);let n=l.createRef(),i=l.createRef(),r=t=>class extends l.Component{componentDidUpdate(t,e){return this.props.logged!==t.logged&&this.setState({logged:this.props.logged}),null}render(){let{message:e,logged:s}=this.state,{changeAuthState:l}=this.props,r={submit:{fontWeight:"bold",margin:"0px 3px",padding:"3px 3px",borderRadius:"5px",border:"solid black 2px",boxShadow:"2px 2px grey"},failed:{color:"red",fontWeight:"bold",textAlign:"center",minHeight:"45px",maxHeight:"45px"}},a=t=>{t.preventDefault(),fetch("".concat("http://localhost:3000/api/","login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:n.current.value,password:i.current.value})}).then(t=>t.json()).then(t=>{let{message:e,token:s,logged:o,login:n,img:i}=t;s&&localStorage.setItem("token",s),this.setState({message:e,logged:o}),l({login:n,logged:o,token:s,img:i})})},d=t=>{fetch("".concat("http://localhost:3000/api/","signIn"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:n.current.value,password:i.current.value})}).then(t=>t.json()).then(t=>{let{message:e}=t;this.setState({message:e})})};return(0,o.jsx)(o.Fragment,{children:s?(0,o.jsx)(t,{...this.props}):(0,o.jsxs)("form",{onSubmit:a,children:[(0,o.jsx)("input",{ref:n,type:"text",placeholder:"login",style:r.submit,className:"login"}),(0,o.jsx)("input",{ref:i,type:"password",placeholder:"password",style:r.submit,className:"login"}),(0,o.jsx)("input",{type:"submit",value:"Login",style:r.submit,className:"login"}),(0,o.jsx)("input",{type:"button",value:"sign in",style:r.submit,onClick:d}),(0,o.jsx)("div",{style:r.failed,children:e})]})})}constructor(...t){super(...t),this.state={logged:this.props.logged,message:""}}};e.default=r},7240:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return a}});var o=s(5893),l=s(7294),n=s(1163),i=s.n(n),r=s(4065);class a extends l.Component{componentDidMount(){let{token:t}=this.props;fetch("".concat("http://localhost:3000/api/","order/all"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})}).then(t=>t.json()).then(t=>{let{data:e,message:s}=t;this.setState({data:e,message:s,loading:!1})})}render(){let{message:t,data:e,loading:s}=this.state,l={order:{textDecoration:"none",color:"black"},table:{table:{textAlign:"center",width:"80%",height:"80%"},thead:{position:"sticky",top:"0%",background:"white",left:"0%"},tr:{cursor:"pointer",width:"100%",transition:"all 0.125s ease-in-out"},td:{border:"solid black 1px",padding:"3px"}},OrdersList:{overflowY:"auto",display:"grid",justifyItems:"center",alignItems:"center",height:"80%"}};return(0,o.jsx)("div",{style:l.OrdersList,children:s?(0,o.jsx)(r.default,{}):e.length>0?(0,o.jsxs)("table",{cellSpacing:1,style:l.table.table,children:[(0,o.jsx)("thead",{style:l.table.thead,children:(0,o.jsxs)("tr",{style:l.table.tr,children:[(0,o.jsx)("th",{style:l.table.td,children:"Id"}),(0,o.jsx)("th",{style:l.table.td,children:"State"}),(0,o.jsx)("th",{style:l.table.td,children:"Date"})]})}),(0,o.jsx)("tbody",{children:e.map((t,e)=>(0,o.jsxs)("tr",{style:l.table.tr,className:"tr",onClick:()=>{i().push("/history/".concat(t.id))},children:[(0,o.jsxs)("td",{style:l.table.td,children:[t.id,"."]}),(0,o.jsx)("td",{style:l.table.td,children:t.state}),(0,o.jsx)("td",{style:l.table.td,children:new Date(t.date).toLocaleString()})]},t.id))})]}):(0,o.jsx)("div",{children:t})})}constructor(...t){super(...t),this.state={message:"",data:[],loading:!0}}}},7218:function(t,e,s){"use strict";s.r(e);var o=s(5893),l=s(7294),n=s(8117),i=s(8519),r=s(9406),a=s(7106),d=s(6004),c=s(7240),h=s(4143);class p extends l.Component{render(){let{profile:t}=this.props,{login:e}=t,s={ProfileLogged:{display:"grid",position:"relative",width:"80vw",height:"80vh",alignItems:"center",gridTemplateRows:"15% 85%"},logout:{cursor:"pointer",fontSize:d.glbl._height,position:"absolute",right:"0%",top:"0%",transition:"all 0.125s ease-in-out"},bold:{fontWeight:"bold"}};return(0,o.jsx)(n.Store.Consumer,{children:t=>{let{changeState:l,profile:n}=null!=t?t:{},{resetLoggedState:i,token:r}=null!=n?n:{},d=()=>{localStorage.removeItem("token"),localStorage.removeItem("cart"),i()};return(0,o.jsxs)("div",{style:s.ProfileLogged,id:"ProfileLogged",children:[(0,o.jsxs)("div",{children:["You are login as: ",(0,o.jsx)("a",{style:s.bold,children:e}),(0,o.jsx)(a.VUx,{className:"logout",style:s.logout,onClick:d})]}),(0,o.jsx)(c.default,{token:r})]})}})}}e.default=(0,i.default)((0,h.default)((0,n.default)((0,r.default)(p))))}},function(t){t.O(0,[907,774,888,179],function(){return t(t.s=1969)}),_N_E=t.O()}]);