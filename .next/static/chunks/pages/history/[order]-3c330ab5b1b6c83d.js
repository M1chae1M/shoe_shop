(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52],{1016:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/history/[order]",function(){return r(3744)}])},8519:function(t,e,r){"use strict";r.r(e);var n=r(5893),s=r(7294);let a=t=>class extends s.Component{componentDidMount(){let t=localStorage.getItem("token");fetch("".concat("http://localhost:3000/api/","auth"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})}).then(t=>t.json()).then(t=>{let{logged:e,login:r,token:n,img:s}=t;this.setState({logged:e,login:r,token:n,img:s})})}render(){let{logged:e,login:r,token:s,img:a}=this.state,o=()=>this.setState({logged:!1,login:"",token:"",img:""}),i=t=>this.setState(t);return(0,n.jsx)(t,{profile:{login:r,token:s,img:a,resetLoggedState:o},changeAuthState:i,logged:e,...this.props})}constructor(...t){super(...t),this.state={logged:!1}}};e.default=a},9988:function(t,e,r){"use strict";r.r(e);var n=r(5893),s=r(7294),a=r(7069),o=r(1664),i=r.n(o),l=r(9274),d=r(8117),c=r(4143);class p extends s.Component{render(){let{order_date:t,data:e,order_cart:r,totalPrice:s}=this.props,o={backBTN:{cursor:"pointer",top:"0%",left:"0%",position:"absolute",color:"black",fontSize:"18px",transition:"all 0.125s ease-in-out",fontWeight:"bold"},table:{table:{textAlign:"center"},td:{border:"solid black 1px",padding:"5px"},tr:{cursor:"pointer",width:"100%",transition:"all 0.125s ease-in-out"}},product:{display:"grid",alignItems:"center",justifyItems:"center",gridTemplateColumns:"70px auto",border:"solid black 1px",margin:"3px 0px",padding:"5px 3px"},productList:{display:"grid",justifyItems:"center",alignItems:"center",minHeight:"110px",maxHeight:"130px",overflowY:"scroll",overflowY:"auto",padding:"0px 3px",width:"fit-content"},order:{position:"relative",padding:"18px"}};return(0,n.jsxs)("div",{style:o.order,children:[(0,n.jsx)(i(),{href:"/profile",children:(0,n.jsx)(l.qVT,{style:o.backBTN,id:"backBTN"})}),(0,n.jsxs)("table",{style:o.table.table,cellSpacing:1,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:o.table.td,children:"Date"}),(0,n.jsx)("td",{style:o.table.td,children:"State"}),(0,n.jsx)("td",{style:o.table.td,children:"Order"}),(0,n.jsx)("td",{style:o.table.td,children:"Total"})]})}),(0,n.jsx)("tbody",{children:(0,n.jsxs)("tr",{style:o.table.tr,children:[(0,n.jsx)("td",{style:o.table.td,children:t}),(0,n.jsx)("td",{style:o.table.td,children:e.state}),(0,n.jsx)("td",{style:o.table.td,children:(0,n.jsx)("div",{style:o.productList,children:r.map((t,e)=>(0,n.jsxs)("div",{style:o.product,children:[(0,n.jsx)(a.default,{src:t.image,alt:"image of ".concat(t.name),x:"60px",y:"40px"}),(0,n.jsxs)("div",{children:[t.howMany," * ",t.price]})]},e))})}),(0,n.jsxs)("td",{style:o.table.td,children:[s," PLN"]})]})})]})]})}}e.default=(0,c.default)((0,d.default)(p))},3744:function(t,e,r){"use strict";let n;r.r(e),r.d(e,{__N_SSG:function(){return h}});var s=r(5893),a=r(7294),o=r(8519),i=r(1163),l=r.n(i),d=r(1604),c=r(9988);class p extends a.Component{componentDidMount(){this.fetchOrder(this)}componentDidUpdate(){this.fetchOrder(this),n&&clearTimeout(n),n=setTimeout(()=>{this.state.data.length<1&&l().push("/profile")},1e3)}shouldComponentUpdate(t,e){let r=JSON.stringify(e.data)!==JSON.stringify(this.state.data),n=this.props.order!==t.order;return!!r||!!n}fetchOrder(t){!async function(){if(null==localStorage?void 0:localStorage.getItem("token")){let{order:e}=t.props,r=await localStorage.getItem("token");await fetch("".concat("http://localhost:3000/api/","order"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,order:e})}).then(t=>t.json()).then(e=>{let{data:r}=e;return t.setState({data:r})})}}()}render(){let{data:t}=this.state,e=(null==t?void 0:t.order_cart)?JSON.parse(t.order_cart):[],r=new Date(t.date).toLocaleString(),n=(e?null==e?void 0:e.reduce((t,e)=>t+e.price*e.howMany,0):0).toFixed(2);return(0,s.jsx)(s.Fragment,{children:"Invalid Date"!==r?(0,s.jsx)(c.default,{order_date:r,data:t,order_cart:e,totalPrice:n}):(0,s.jsx)(d.default,{})})}constructor(...t){super(...t),this.state={data:[]}}}var h=!0;e.default=(0,o.default)(p)}},function(t){t.O(0,[827,774,888,179],function(){return t(t.s=1016)}),_N_E=t.O()}]);